"use strict";(self.webpackChunk_carbon_ai_chat_examples_web_components_basic=self.webpackChunk_carbon_ai_chat_examples_web_components_basic||[]).push([[1177],{15997:function(e,n,a){a.d(n,{q:function(){return N}});var t=a(7378),l=(a(79124),a(24238)),r=a(15052),i=a(70944),o=a(96829),c=a(65818),s=a(46656),m=a(67733),d=a.n(m),u=a(48034),p=a.n(u),h=a(62562),g=a.n(h),E=a(39805),f=a.n(E),v=a(57577),b=a.n(v),k=a(79062),y=a.n(k),x=a(95924),L={};L.styleTagTransform=y(),L.setAttributes=f(),L.insert=g().bind(null,"head"),L.domAPI=p(),L.insertStyleElement=b();d()(x.A,L),x.A&&x.A.locals&&x.A.locals,a(71109),a(52306);class C extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){}render(){return this.state.hasError?t.createElement("div",{style:{padding:"20px",textAlign:"center"}},t.createElement("h2",null,"Something went wrong"),t.createElement("p",null,this.state.error?.message||"Unknown error"),t.createElement("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()}},"Reload Page")):this.props.children}}function N(){const[e,n]=(0,t.useState)({}),[a,m]=(0,t.useState)([]),[d,u]=(0,t.useState)(null),[p,h]=(0,t.useState)(!1),[g,E]=(0,t.useState)(!1),[f,v]=(0,t.useState)(null),[b,k]=(0,t.useState)("conversations"),[y,x]=(0,t.useState)(0),[L,N]=(0,t.useState)(0),T=(0,t.useRef)(null),S=(0,t.useCallback)((e,a)=>{const t=Object.keys(e).length,l=a.length;n(e),m(a);(t>y||l>L)&&k("variables"),x(t),N(l)},[y,L]),A=(0,t.useCallback)(e=>{if(T.current){const n=e.length>50?e.substring(0,50)+"...":e;T.current.addConversation(n)}k("conversations")},[]);return t.createElement(C,null,t.createElement("div",{className:"app-layout"},t.createElement(r.A,{onToggleLeftSidebar:()=>E(!g),onToggleWorkspace:()=>h(!p),leftSidebarCollapsed:g,workspaceOpen:p}),t.createElement("div",{className:"main-layout"},t.createElement(i.E,{globalVariables:e,variablesHistory:a,selectedAnswerId:d,onSelectAnswer:u,isCollapsed:g,activeTab:b,onTabChange:k,leftSidebarRef:T}),t.createElement("div",{className:"chat-container"},t.createElement(l._,{onVariablesUpdate:S,onFileAutocompleteOpen:()=>h(!0),onFileHover:v,onMessageSent:A})),t.createElement(c.G,{isOpen:p,onToggle:()=>h(!p),highlightedFile:f})),t.createElement(o.e,null),t.createElement(s.B,{onFileSelect:e=>{},onAutocompleteOpen:()=>h(!0),onFileHover:v,disabled:!1})))}},85521:function(e,n,a){a.d(n,{A:function(){return r}});var t=a(7378),l=a(83281);a(33802);function r({onClose:e}){const[n,a]=(0,t.useState)({autonomyLevel:2,humanInTheLoop:!0,requireConfirmationFor:{approvalOfPlans:!0,criticalActions:!0,financialTransactions:!0,dataModification:!1,externalCommunication:!0,longRunningTasks:!1},interventionRules:[],clarificationThreshold:70,autoApproveSimpleTasks:!0,escalationEnabled:!0,adaptiveLearning:{enabled:!1,startWithHighOversight:!0,learningRate:50,confidenceThreshold:85,memoryBased:!0,trackSuccessRate:!0,minInteractionsBeforeLearning:10}}),[r,i]=(0,t.useState)("idle"),[o,c]=(0,t.useState)("");(0,t.useEffect)(()=>{s()},[]);const s=async()=>{try{const e=await fetch("/api/config/agent-human");if(e.ok){const n=await e.json();a({autonomyLevel:n.autonomyLevel??2,humanInTheLoop:n.humanInTheLoop??!0,requireConfirmationFor:n.requireConfirmationFor??{approvalOfPlans:!0,criticalActions:!0,financialTransactions:!0,dataModification:!1,externalCommunication:!0,longRunningTasks:!1},interventionRules:n.interventionRules??[],clarificationThreshold:n.clarificationThreshold??70,autoApproveSimpleTasks:n.autoApproveSimpleTasks??!0,escalationEnabled:n.escalationEnabled??!0,adaptiveLearning:n.adaptiveLearning??{enabled:!1,startWithHighOversight:!0,learningRate:50,confidenceThreshold:85,memoryBased:!0,trackSuccessRate:!0,minInteractionsBeforeLearning:10}})}}catch(e){}},m=()=>{if(o.trim()){const e={id:Date.now().toString(),condition:o.trim(),enabled:!0};a({...n,interventionRules:[...n.interventionRules,e]}),c("")}},d=e=>{switch(e){case 1:return"#10b981";case 2:default:return"#f59e0b";case 3:return"#ef4444"}};return t.createElement("div",{className:"config-modal-overlay",onClick:e},t.createElement("div",{className:"config-modal",onClick:e=>e.stopPropagation()},t.createElement("div",{className:"config-modal-header"},t.createElement("h2",null,"Agent / Human Interaction"),t.createElement("button",{className:"config-modal-close",onClick:e},t.createElement(l.X,{size:20}))),t.createElement("div",{className:"config-modal-content"},t.createElement("div",{className:"config-card"},t.createElement("h3",null,"Autonomy Level"),t.createElement("div",{className:"config-form"},t.createElement("div",{className:"form-group"},t.createElement("div",{className:"autonomy-slider-container"},t.createElement("div",{className:"autonomy-icons"},t.createElement(l.zWC,{size:24,color:1===n.autonomyLevel?d(n.autonomyLevel):"#cbd5e1"}),t.createElement(l.KqI,{size:24,color:3===n.autonomyLevel?d(n.autonomyLevel):"#cbd5e1"})),t.createElement("div",{className:"autonomy-label-display"},t.createElement("span",{className:"autonomy-value",style:{color:d(n.autonomyLevel)}},"Level ",n.autonomyLevel),t.createElement("span",{className:"autonomy-description"},(e=>{switch(e){case 1:return"Safe - Always Asks";case 2:default:return"Balanced - Sometimes Asks";case 3:return"Risky - Rarely Asks"}})(n.autonomyLevel))),t.createElement("input",{type:"range",min:"1",max:"3",step:"1",value:n.autonomyLevel,onChange:e=>a({...n,autonomyLevel:parseInt(e.target.value)}),className:"autonomy-slider",style:{background:`linear-gradient(to right, ${d(n.autonomyLevel)} 0%, ${d(n.autonomyLevel)} ${50*(n.autonomyLevel-1)}%, #e5e7eb ${50*(n.autonomyLevel-1)}%, #e5e7eb 100%)`}}),t.createElement("div",{className:"safety-indicator",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px",marginBottom:"4px",padding:"0 4px"}},t.createElement("div",{className:"safety-text",style:{display:"flex",alignItems:"center",gap:"4px",color:"#10b981"}},t.createElement(l.ekZ,{size:14}),t.createElement("strong",null,"Safe")),t.createElement("div",{className:"safety-text",style:{display:"flex",alignItems:"center",gap:"4px",color:"#f59e0b"}},t.createElement("strong",null,"Caution")),t.createElement("div",{className:"safety-text",style:{display:"flex",alignItems:"center",gap:"4px",color:"#ef4444"}},t.createElement("strong",null,"Risky"))),t.createElement("div",{className:"autonomy-markers"},t.createElement("span",null,"Level 1"),t.createElement("span",null,"Level 2"),t.createElement("span",null,"Level 3"))),t.createElement("small",null,"Slide left for maximum safety (agent always asks) or right for higher risk but faster results")),t.createElement("div",{className:"form-group"},t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.humanInTheLoop,onChange:e=>a({...n,humanInTheLoop:e.target.checked})}),t.createElement("span",null,"Enable Human-in-the-Loop")),t.createElement("small",null,"Allow human oversight and intervention during agent execution")),t.createElement("div",{className:"form-row"},t.createElement("div",{className:"form-group"},t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.autoApproveSimpleTasks,onChange:e=>a({...n,autoApproveSimpleTasks:e.target.checked}),disabled:!n.humanInTheLoop}),t.createElement("span",null,"Auto-Approve Simple Tasks")),t.createElement("small",null,"Skip confirmation for low-risk operations")),t.createElement("div",{className:"form-group"},t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.escalationEnabled,onChange:e=>a({...n,escalationEnabled:e.target.checked}),disabled:!n.humanInTheLoop}),t.createElement("span",null,"Enable Escalation")),t.createElement("small",null,"Agent can escalate complex issues to human"))))),t.createElement("div",{className:"config-card"},t.createElement("h3",null,"Require Confirmation For"),t.createElement("div",{className:"config-form"},t.createElement("div",{className:"confirmation-grid"},t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.requireConfirmationFor.approvalOfPlans,onChange:e=>a({...n,requireConfirmationFor:{...n.requireConfirmationFor,approvalOfPlans:e.target.checked}}),disabled:!n.humanInTheLoop}),t.createElement("div",null,t.createElement("span",null,"Approval of Plans"),t.createElement("small",null,"Agent must get approval before executing task plans"))),t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.requireConfirmationFor.criticalActions,onChange:e=>a({...n,requireConfirmationFor:{...n.requireConfirmationFor,criticalActions:e.target.checked}}),disabled:!n.humanInTheLoop}),t.createElement("div",null,t.createElement("span",null,"Critical Actions"),t.createElement("small",null,"Deletions, system changes, irreversible operations"))),t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.requireConfirmationFor.financialTransactions,onChange:e=>a({...n,requireConfirmationFor:{...n.requireConfirmationFor,financialTransactions:e.target.checked}}),disabled:!n.humanInTheLoop}),t.createElement("div",null,t.createElement("span",null,"Financial Transactions"),t.createElement("small",null,"Payments, purchases, billing operations"))),t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.requireConfirmationFor.dataModification,onChange:e=>a({...n,requireConfirmationFor:{...n.requireConfirmationFor,dataModification:e.target.checked}}),disabled:!n.humanInTheLoop}),t.createElement("div",null,t.createElement("span",null,"Data Modification"),t.createElement("small",null,"Editing, updating, or modifying existing data"))),t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.requireConfirmationFor.externalCommunication,onChange:e=>a({...n,requireConfirmationFor:{...n.requireConfirmationFor,externalCommunication:e.target.checked}}),disabled:!n.humanInTheLoop}),t.createElement("div",null,t.createElement("span",null,"External Communication"),t.createElement("small",null,"Sending emails, messages, or external API calls"))),t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.requireConfirmationFor.longRunningTasks,onChange:e=>a({...n,requireConfirmationFor:{...n.requireConfirmationFor,longRunningTasks:e.target.checked}}),disabled:!n.humanInTheLoop}),t.createElement("div",null,t.createElement("span",null,"Long-Running Tasks"),t.createElement("small",null,"Tasks estimated to take more than 5 minutes")))))),t.createElement("div",{className:"config-card"},t.createElement("div",{className:"section-header"},t.createElement("h3",null,"Return to Human When..."),t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("input",{type:"text",value:o,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),m())},placeholder:"e.g., encountering sensitive data",disabled:!n.humanInTheLoop,style:{width:"300px",padding:"6px 10px",fontSize:"13px"}}),t.createElement("button",{className:"add-small-btn",onClick:m,disabled:!n.humanInTheLoop||!o.trim()},t.createElement(l.FWt,{size:12}),"Add Rule"))),0===n.interventionRules.length?t.createElement("div",{className:"policies-empty"},"No intervention rules defined. Add conditions when the agent should return control to a human."):t.createElement("div",{className:"intervention-rules-list"},n.interventionRules.map(e=>t.createElement("div",{key:e.id,className:"intervention-rule-item"},t.createElement("input",{type:"checkbox",checked:e.enabled,onChange:()=>{return t=e.id,void a({...n,interventionRules:n.interventionRules.map(e=>e.id===t?{...e,enabled:!e.enabled}:e)});var t},disabled:!n.humanInTheLoop}),t.createElement("span",{className:"rule-text "+(e.enabled?"":"disabled")},e.condition),t.createElement("button",{className:"remove-btn",onClick:()=>{return t=e.id,void a({...n,interventionRules:n.interventionRules.filter(e=>e.id!==t)});var t},disabled:!n.humanInTheLoop},t.createElement(l.X,{size:14}))))),t.createElement("small",null,"Define specific scenarios when the agent should pause and request human input")),t.createElement("div",{className:"config-card"},t.createElement("h3",null,"Adaptive Learning"),t.createElement("div",{className:"config-form"},t.createElement("div",{className:"form-group"},t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.adaptiveLearning.enabled,onChange:e=>a({...n,adaptiveLearning:{...n.adaptiveLearning,enabled:e.target.checked}}),disabled:!n.humanInTheLoop}),t.createElement("span",null,"Enable Adaptive Learning")),t.createElement("small",null,"Agent learns from interactions and adjusts autonomy over time")),t.createElement("div",{className:"adaptive-learning-info"},t.createElement("p",{className:"info-text"},"With adaptive learning, the agent starts cautious and gradually becomes more autonomous as it learns from successful interactions and builds confidence through memory.")),t.createElement("div",{className:"form-group"},t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.adaptiveLearning.startWithHighOversight,onChange:e=>a({...n,adaptiveLearning:{...n.adaptiveLearning,startWithHighOversight:e.target.checked}}),disabled:!n.adaptiveLearning.enabled||!n.humanInTheLoop}),t.createElement("span",null,"Start with High Oversight")),t.createElement("small",null,"Agent asks frequently at first, then reduces questions as it learns")),t.createElement("div",{className:"form-row"},t.createElement("div",{className:"form-group"},t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.adaptiveLearning.memoryBased,onChange:e=>a({...n,adaptiveLearning:{...n.adaptiveLearning,memoryBased:e.target.checked}}),disabled:!n.adaptiveLearning.enabled||!n.humanInTheLoop}),t.createElement("span",null,"Memory-Based Learning")),t.createElement("small",null,"Use past interactions from memory to inform decisions")),t.createElement("div",{className:"form-group"},t.createElement("label",{className:"checkbox-label"},t.createElement("input",{type:"checkbox",checked:n.adaptiveLearning.trackSuccessRate,onChange:e=>a({...n,adaptiveLearning:{...n.adaptiveLearning,trackSuccessRate:e.target.checked}}),disabled:!n.adaptiveLearning.enabled||!n.humanInTheLoop}),t.createElement("span",null,"Track Success Rate")),t.createElement("small",null,"Monitor and learn from successful vs. corrected actions"))),t.createElement("div",{className:"form-group"},t.createElement("label",null,"Min. Interactions Before Learning"),t.createElement("input",{type:"number",value:n.adaptiveLearning.minInteractionsBeforeLearning,onChange:e=>a({...n,adaptiveLearning:{...n.adaptiveLearning,minInteractionsBeforeLearning:parseInt(e.target.value)}}),min:"1",max:"100",disabled:!n.adaptiveLearning.enabled||!n.humanInTheLoop}),t.createElement("small",null,"Number of interactions required before agent starts adapting")),t.createElement("div",{className:"learning-examples"},t.createElement("h4",null,"How It Works:"),t.createElement("ul",{className:"learning-bullets"},t.createElement("li",null,t.createElement("strong",null,"First Time:")," Agent asks for confirmation on most actions"),t.createElement("li",null,t.createElement("strong",null,"After Success:")," If action succeeds and you approve, confidence increases"),t.createElement("li",null,t.createElement("strong",null,"Pattern Recognition:")," Agent learns from similar past situations in memory"),t.createElement("li",null,t.createElement("strong",null,"Gradual Autonomy:")," Over time, agent stops asking for familiar tasks"),t.createElement("li",null,t.createElement("strong",null,"Context Aware:")," Still asks for new or high-risk situations")))))),t.createElement("div",{className:"config-modal-footer"},t.createElement("button",{className:"cancel-btn",onClick:e},"Cancel"),t.createElement("button",{className:`save-btn ${r}`,onClick:async()=>{i("saving");try{(await fetch("/api/config/agent-human",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(i("success"),setTimeout(()=>i("idle"),2e3)):(i("error"),setTimeout(()=>i("idle"),2e3))}catch(e){i("error"),setTimeout(()=>i("idle"),2e3)}},disabled:"saving"===r},t.createElement(l.eMP,{size:16}),"idle"===r&&"Save Changes","saving"===r&&"Saving...","success"===r&&"Saved!","error"===r&&"Error!"))))}},95924:function(e,n,a){var t=a(21598),l=a.n(t),r=a(2607),i=a.n(r)()(l());i.push([e.id,".app-layout {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n  background: linear-gradient(359deg, #e7f2ff, #ffffff);\n}\n\n.main-layout {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n  margin-bottom: 42px;\n  padding-left: 20%;\n  padding-right: 20%;\n}\n\n@media (max-width: 1200px) {\n  .main-layout {\n    padding-left: 10%;\n    padding-right: 10%;\n  }\n}\n\n@media (max-width: 768px) {\n  .main-layout {\n    padding-left: 5%;\n    padding-right: 5%;\n  }\n}\n\n@media (max-width: 640px) {\n  .main-layout {\n    padding-left: 8px;\n    padding-right: 8px;\n  }\n}\n\n.chat-container {\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n  border-radius: 8px;\n}\n\n\n.chat-container .fullScreen {\n  height: 100%;\n  width: 100%;\n}\n\n/* Ensure chat content doesn't overflow */\n.chat-container > * {\n  max-width: 100%;\n  box-sizing: border-box;\n  height: 100%;\n  width: 100%;\n}\n\n",""]),n.A=i}}]);